"use strict";const ajaxRequest=async function(e,t,n,a=!0,o=null,s=!1){setHeaders();let r={url:e,type:t,data:n,processData:!0,beforeSend:()=>{a&&preLoader("show")},success:e=>(a&&preLoader("hide"),e.status?e.status?(""!==e.message&&null!==e.message&&toastr.success(e.message),e):void 0:(void 0!==e.message&&""!==e.message&&null!==e.message&&toastr.error(e.message),!1)),error:e=>{if(a&&preLoader("hide"),422!==e.status)""!==e.responseJSON.message&&null!==e.responseJSON.message&&toastr.error(e.responseJSON.message);else{let t=e.responseJSON?e.responseJSON.errors:JSON.parse(e.responseText).errors;populateErrors(o,t)}}};return!1!==s&&(r.processData=!1,r.contentType=!1),await $.ajax(r)},preLoader=function(e){let t=$("body").find("#pageloader");"show"!==e?t.hide():t.show()},setHeaders=function(){$.ajaxSetup({headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":$("meta[name=csrf-token]").attr("content")}})},enableDatePicker=(e,t=!0,n=!0,a=!1)=>{let o={language:"en",timepicker:t,classes:a?"only-timepicker":""};o.dateFormat=a?" ":"yyyy-mm-dd",n&&(o.minDate=new Date),$(e).datepicker(o),a&&$("body").find(".only-timepicker .datepicker--content, .datepicker--nav").css({display:"none"})},numberFormat=e=>e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),insertParam=(e,t)=>{e=encodeURI(e),t=encodeURI(t);let n,a=document.location.search.substr(1).split("&"),o=a.length;for(;o--;)if((n=a[o].split("="))[0]==e){n[1]=t,a[o]=n.join("=");break}return o<0&&(a[a.length]=[e,t].join("=")),a.join("&")},populateFields=function(e,t){$.each(t,function(t,n){let a=$("[name="+t+"]",e);switch(a.prop("type")){case"radio":case"checkbox":a.each(function(){$(this).attr("value")===n&&$(this).attr("checked",n)});break;default:a.val(n)}})},populateErrors=function(e,t){let n=!1;$.each(t,function(t,a){$(e).find(`.error-${t}`).remove();let o=$(e).find(`input[name="${t}"], select[name="${t}"]`);if(o.hasClass("select2-hidden-accessible")&&(o=o.next()),o.length<1&&!n)return n=!0,void toastr.error("Please check required fields.");o.after(`<label class="error error-${t}">${a}</label>`),o.trigger("focus")})},confirm=function(e){return swal({title:e,type:"warning",showCancelButton:!0,confirmButtonColor:"#0CC27E",cancelButtonColor:"#FF586B",confirmButtonText:"Yes",cancelButtonText:"No",confirmButtonClass:"btn btn-success mr-5",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(e){return!!e})},livePreview=(e,t)=>{let n=new FileReader;n.onload=function(e){$(t).attr("src",e.target.result)},n.readAsDataURL(e)},dataTableSettings=function(){return{serverSide:!0,processing:!0}},dataTables=function(e,t,n=null,a=null,o=null){let s=null===n?setBySelector(e):pushColumns(n),r=!0,l=!0;$(e).DataTable({serverSide:r,processing:l,ajax:{url:t},columns:s,columnDefs:a})},pushColumns=function(e){let t=[];return e.forEach(e=>{t.push({data:e})}),t},setBySelector=function(e){let t=[];return $(e).find("th").each((e,n)=>{"action"!==$(n).text()&&t.push($(n).text().replace(/\s+/g,"_").toLowerCase())}),pushColumns(t)},authenticated=()=>""!==Window.Laravel.user,myId=()=>Window.Laravel.user,scrollDown=e=>{e.animate({scrollTop:e[0].scrollHeight})},str_formatting=(e,t)=>e<1?"Studio":e>1?e+" "+t+"s":e+" "+t,toggleEye=e=>{e.toggleClass("fa-eye-slash"),e.hasClass("fa-eye-slash")?e.siblings("input").attr("type","text"):e.siblings("input").attr("type","password")};$(()=>{preLoader("show");let e=$("body");e.on("submit",".ajax",async function(t){t.preventDefault();let n=null,a=$(this),o=$(this).attr("id"),s=$(this).attr("action"),r=$(this).attr("method"),l=$(this).attr("loading"),i=$(this).attr("reset"),c=void 0!==$(this).attr("enctype");if(e.find(".error").removeClass("error-*").text(""),c){let e=$(this).find("input[type=file]"),t=new FormData;e.length>0&&$.each(e,(e,n)=>{let a=$(`input[name="${$(n).attr("name")}"]`)[0].files;for(let e=0;e<a.length;e++)t.append($(n).attr("name"),a[e])}),(n=$(this).serializeArray()).length>0&&n.forEach(e=>{t.append(e.name,e.value)}),n=t}else n=$(this).serialize();await ajaxRequest(s,r,n,"false"!==l,a,c).then(e=>{if("true"===i){let e=$(a).find("input[type=submit]").val();$(a).find("input, select, textarea").val(""),$(a).find("input[type=submit]").val(e)}e.status&&a.trigger(`form-success${void 0!==o?"-"+o:""}`,e.data),void 0!==e.url&&(null===e.url?setTimeout(()=>{window.location.reload()},1e3):setTimeout(()=>{window.location.href=e.url},1e3))}).catch(e=>{})}),$(".i-Close-Window").on("click",function(e){let t=$(this).parent().attr("href");e.preventDefault(),swal({title:"Are you sure?",text:"You won't be able to revert this!",type:"warning",showCancelButton:!0,confirmButtonColor:"#0CC27E",cancelButtonColor:"#FF586B",confirmButtonText:"Yes",cancelButtonText:"No",confirmButtonClass:"btn btn-success mr-5",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(async function(){await ajaxRequest(t,"delete",null,!1).then(e=>{setTimeout(()=>{window.location.reload()},1e3)})},function(e){"cancel"===e&&swal("Cancelled","Your record is safe :)","error")})}),e.on("click",".approval",async function(e){e.preventDefault();let t=$(this).attr("href");return await("You want to approve?",swal({title:"You want to approve?",type:"warning",showCancelButton:!0,confirmButtonColor:"#0CC27E",cancelButtonColor:"#FF586B",confirmButtonText:"Yes",cancelButtonText:"No",confirmButtonClass:"btn btn-success mr-5",cancelButtonClass:"btn btn-danger",buttonsStyling:!1}).then(function(e){return!!e})).then(async e=>{preLoader("show"),await ajaxRequest(t,"post",null).then(e=>setTimeout(()=>{window.location.reload()},1e3))}),!1}),e.on("click",".rejection",async function(e){e.preventDefault();let t=$(this).text().replace("Reject ",""),n=$(this).attr("href"),a=$(".generic-modal");a.find("form").attr("action",n),a.find(".modal-title").text("Reason of Rejection ("+t+")"),a.modal("show")})}),window.onload=function(){setTimeout(()=>{preLoader("hide")},500)};
